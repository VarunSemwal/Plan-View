<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" [routerLink]="['/admindashboard']">Dashboard</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <button style="margin: 10px 11px 13px 3px;" class="nav-link" [routerLink]="['/user']">User Management </button>
      </li>
      <li class="nav-item active">
        <button style="margin: 10px 11px 13px 3px;" class="nav-link" [routerLink]="['/work']">Work Management</button>
      </li>
      <li class="nav-item active">
        <button style="margin: 10px 11px 13px 3px;" class="nav-link" [routerLink]="['/userwork']">User Work Item Assignment</button>
      </li>
      <li class="nav-item active">
        <button style="margin: 10px 11px 13px 3px;" class="nav-link" [routerLink]="['/messages']">Message Inbox</button>
      </li>
    </ul>

     
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit" (click)="logout()"><h6>Logout</h6></button>

  </div>
</nav>


<div class="container">
    <div class="row">
     <div class="col-md-12 py-4 text-center">
      <h3>Users List</h3>
     </div>
    </div>
    <div style="margin: -59px 0 0 0;" class="row justify-content-center">
     <div class="col-md-12 py-4">
      <table class="table table-striped">
       <thead>
        <tr>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Date Of Birth</th>
            <th>Address Line 1</th>
            <th>Address Line 2</th>
            <th>City</th>
            <th>State</th>
            <th>Country</th>
            <th>Zip Code</th>
            <th>Role</th>
        </tr>
       </thead>
       <tbody>
        <tr *ngFor = "let user of userDetails">
            <td>{{user.email}}</td>
            <td>{{user.firstName}}</td>
            <td>{{user.lastName}}</td>
            <td>{{user.dateofbirth | dob}}</td>
            <td>{{user.addressLine1}}</td>
            <td>{{user.addressLine2}}</td>
            <td>{{user.city}}</td>
            <td>{{user.state}}</td>
            <td>{{user.country}}</td>
            <td>{{user.zipcode}}</td>
            <td>{{user.role}}</td>
         <td>
          <!-- <button type="button" class="btn btn-primary" (click)="openModal(editProfileModal, user)">Edit</button>
          <a title="Delete" (click)="open(content,user.id)">Delete</a>
          <button [disabled]="user.lockstatus===0" type="button" class="btn btn-primary" (click)="unlockUser(user)">Unlock</button> -->

          <i  class="fa fa-pencil-square-o fa-2x d-inline" style="padding-inline: 4px;" title="Edit" (click)="openModal(editProfileModal, user)"></i>
          <i  class="fa fa-trash fa-2x d-inline" style="padding-inline: 4px;" title="Delete" aria-hidden="true" (click)="open(content,user.id)"></i>
          <i *ngIf="user.lockstatus==1" class="fa fa-unlock fa-2x d-inline" style="padding-inline: 4px;" title="Unlock" aria-hidden="true" (click)="unlockUser(user)" > </i>

         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </div>

   <ng-template #editProfileModal let-modal>
    <div class="modal-header">
     <h5 class="modal-title" id="editProfileLabel">Edit Profile</h5>
     <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
     </button>
    </div>
    
    <div class="modal-body">
     <form [formGroup]="editProfileForm" (ngSubmit)="onSubmit(editProfileForm.value)">
        <div class="form-group row">
            <label for="email" class="col-sm-4 col-form-label">Email</label>
            <div class="col-sm-8">
             <input type="text" class="form-control" formControlName="email" id="email">
            </div>
        </div>

        
      <div class="form-group row">
       <label for="firstName" class="col-sm-4 col-form-label">First Name</label>
       <div class="col-sm-8">
        <input type="text" class="form-control" formControlName="firstName" id="firstName" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" >
        <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
            <div *ngIf="f.firstName.errors.required">First Name is required</div>
            <div *ngIf="f.firstName.errors.pattern">First Name can only have alphabets</div>
        </div>
        </div>

      </div>
      <div class="form-group row">
       <label for="lastName" class="col-sm-4 col-form-label">Last Name</label>
       <div class="col-sm-8">
        <input type="text" class="form-control" formControlName="lastName" id="lastName" [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }">
        <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
            <div *ngIf="f.lastName.errors.required">Last Name is required</div>
            <div *ngIf="f.lastName.errors.pattern">Last Name can only have alphabets</div>
        </div>
       </div>
       
      </div>
      <div class="form-group row">
       <label for="dob" class="col-sm-4 col-form-label">Date Of Birth</label>
       <div class="col-sm-8">
        <!-- <input type="text" class="form-control" formControlName="dob" id="dob"> -->
        <input readonly formControlName="dob" (dateSelect)="onDateSelect($event)" [ngClass]="{ 'is-invalid': submitted && f.dob.errors }" class="form-control" [maxDate]="{'year': year, 'month': month, 'day': day}" placeholder="D.O.B YYYY-MM-DD" ngbDatepicker #d="ngbDatepicker">
        <div class="input-group-append">
            <button  class="btn btn-outline-secondary calendar" style="position: absolute;margin: -38px 0px 0px 239px; width: 62px;" (click)="d.toggle()" type="button">ðŸ“…</button>
        </div>
        <div *ngIf="submitted && f.dob.errors" class="invalid-feedback">
            <div *ngIf="f.dob.errors.required">Date Of Birth is required</div>
            <div *ngIf="f.dob.errors.ngbDate.invalid">Date Of Birth must be YYYY-MM-DD</div>
                                    
        </div>
       </div>
      </div>
      <div class="form-group row">
       <label for="addressLine1" class="col-sm-4 col-form-label">Address Line 1</label>
       <div class="col-sm-8">
        <input type="text" class="form-control" formControlName="addressLine1" id="addressLine1">
       </div>
      </div>
      <div class="form-group row">
        <label for="addressLine2" class="col-sm-4 col-form-label">Address Line 2</label>
        <div class="col-sm-8">
         <input type="text" class="form-control" formControlName="addressLine2" id="addressLine1">
        </div>
       </div>
       <div class="form-group row">
        <label for="city" class="col-sm-4 col-form-label">City</label>
        <div class="col-sm-8">
         <input type="text" class="form-control" formControlName="city" id="city" [ngClass]="{ 'is-invalid': submitted && f.city.errors }" >
         <div *ngIf="submitted && f.city.errors" class="invalid-feedback">
            <div *ngIf="f.city.errors.required">City is required</div>
            <div *ngIf="f.city.errors.pattern">City can only have alphabets</div>
        </div>
        </div>
        
       </div>
       <div class="form-group row">
        <label for="state" class="col-sm-4 col-form-label">State</label>
        <div class="col-sm-8">
         <input type="text" class="form-control" formControlName="state" id="state" [ngClass]="{ 'is-invalid': submitted && f.state.errors }">
         <div *ngIf="submitted && f.state.errors" class="invalid-feedback">
            <div *ngIf="f.state.errors.required">State is required</div>
            <div *ngIf="f.state.errors.pattern">State can only have alphabets</div>
        </div>
        </div>
        
        </div>
       <div class="form-group row">
        <label for="country" class="col-sm-4 col-form-label">Country</label>
        <div class="col-sm-8">
         <input type="text" class="form-control" formControlName="country" id="country" [ngClass]="{ 'is-invalid': submitted && f.country.errors }">
         <div *ngIf="submitted && f.country.errors" class="invalid-feedback">
            <div *ngIf="f.country.errors.required">Country is required</div>
            <div *ngIf="f.country.errors.pattern">Country can only have alphabets</div>
        </div>
        </div>
        
       </div>
       <div class="form-group row">
        <label for="zipcode" class="col-sm-4 col-form-label">Zip Code</label>
        <div class="col-sm-8">
         <input type="text" class="form-control" formControlName="zipcode" id="zipcode">
        </div>
       </div>
       <div class="form-group row">
        <label for="role" class="col-sm-4 col-form-label">Role</label>
        <div class="col-sm-8">
            <select class="form-control" formControlName="role" id="role">
                <option *ngFor="let role of roles">{{role}}</option>
            </select>
        </div>
       </div>
      <div class="modal-footer">
       <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Close</button>
       <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
     </form>
    </div>
   </ng-template>
   
   <ng-template #content let-c="close" let-d="dismiss">    
    <div class="modal-header">    
        <h4 class="modal-title" id="modal-basic-title">Confirmation</h4>    
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">    
            <span aria-hidden="true">Ã—</span>    
        </button>    
    </div>    
    <div class="modal-body">    
        <p>Are you sure to delete this?</p>    
    </div>    
    <div class="modal-footer">    
        <button type="button" class="btn btn-outline-dark" (click)="d('Cross click')">Cancel</button>    
        <button type="button" class="btn btn-outline-dark" (click)="c('yes')">Yes</button>    
    </div>    
</ng-template>   




